<UserControl x:Class="ControlU.Controls.DBPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ControlU.Controls"
             
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="900">
    <Grid Name="MainGrid">
        <Grid.Resources>
            <Style TargetType="Grid">
                <Setter Property="IsEnabled" Value="True"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=ServerIsRunning, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="False">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        <TabControl>
            <TabControl.Resources>
                <local:FreqConverterDecimal x:Key="FreqConverter"/>
                <local:CoorConverter x:Key="CoorConverter"/>
                <local:ATDIFreqToStringConverter x:Key="ATDI_FreqsConverter"/>
                <local:ATDIFreqsToStringMultiConverter x:Key="ATDI_FreqsMultiConverter"/>
                <local:LevelConverter x:Key="LevelConverter"/>
                <local:MonthToStringConverter x:Key="MonthToString"/>
            </TabControl.Resources>

            <TabItem Name="Atdi_TabItem" Header="ICS Control" Width="120" FontSize="16" Height="30">
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions >
                        <ColumnDefinition Name="Data_ColumnDefinition" Width="*"/>
                        <ColumnDefinition>
                            <ColumnDefinition.Resources>
                                <Style TargetType="ColumnDefinition">
                                    <Setter Property="Width" Value="5"></Setter>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=ATDI_ShowSpectrum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                            <Setter Property="Width" Value="0"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ColumnDefinition.Resources>
                        </ColumnDefinition>
                        <ColumnDefinition Name="ResData_ColumnDefinition" Width="0"/>
                    </Grid.ColumnDefinitions>
                    <Grid Margin="1,1,0,0" Name="ATDI_ButtonPanel">
                        <Grid.Resources>
                            <Style TargetType="Grid">
                                <Setter Property="IsEnabled" Value="False"></Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=ServerIsLoaded, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                        <Setter Property="IsEnabled" Value="True"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Resources>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="32"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Click="ATDI_DownloadTasks_Click" ClickMode="Press" ToolTip="{DynamicResource DBPanel_DownloadTasks}" HorizontalAlignment="Left" Width="27" Margin="0,0,5,0" Height="27">
                            <Path Data="{StaticResource ArrowDown_inv_PathData}" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center" Fill="#FF787878" Height="19"/>
                        </Button>
                        <Button Click="ATDI_UploadTasks_Click" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" HorizontalAlignment="Left" Width="27" Margin="0,0,5,0" Height="27" Grid.Column="1">
                            <Path Data="{StaticResource ArrowUp_inv_PathData}" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center" Fill="#FF787878" Height="19"/>
                        </Button>
                        <Button Click="ShowSpectrum_Click" Tag="ATDI" ToolTip="{DynamicResource DBPanel_ShowResults}" Width="27" Margin="0,0,5,0" Height="27" Grid.Column="2">
                            <Path Data="{StaticResource Spectrum_PathData}" Stretch="Fill" Width="19"  VerticalAlignment="Center" HorizontalAlignment="Center" Height="19" Margin="0" StrokeThickness="1.5">
                                <Path.Resources>
                                    <Style TargetType="Path">
                                        <Setter Property="Stroke" Value="#FF787878"></Setter>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=ATDI_ShowSpectrum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                <Setter Property="Stroke" Value="#FF4696CC"></Setter>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Path.Resources>
                            </Path>
                        </Button>


                    </Grid>

                    <GridSplitter Width="3" Margin="1,0" HorizontalAlignment="Center" Grid.Column="1" Panel.ZIndex="1" Grid.Row="1">
                        <GridSplitter.Resources>
                            <Style TargetType="GridSplitter">
                                <Setter Property="IsEnabled" Value="False"></Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=ATDI_ShowSpectrum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                        <Setter Property="IsEnabled" Value="True"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </GridSplitter.Resources>
                        <GridSplitter.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <LinearGradientBrush.RelativeTransform>
                                    <TransformGroup>
                                        <ScaleTransform CenterY="0.5" CenterX="0.5"/>
                                        <SkewTransform CenterY="0.5" CenterX="0.5"/>
                                        <RotateTransform Angle="90" CenterY="0.5" CenterX="0.5"/>
                                        <TranslateTransform/>
                                    </TransformGroup>
                                </LinearGradientBrush.RelativeTransform>
                                <GradientStop Color="LightGray" Offset="0.5"/>
                                <GradientStop Color="Gainsboro" Offset="1"/>
                                <GradientStop Color="#FFAFAFAF"/>
                            </LinearGradientBrush>
                        </GridSplitter.Background>
                    </GridSplitter>
                    <ScrollViewer Name="ATDI_TasksData" VerticalScrollBarVisibility="Auto" Margin="0" Grid.ColumnSpan="1" Grid.RowSpan="2" Grid.Row="1">
                        <StackPanel >
                            <Expander Header="Results with task">
                                <ListView ItemsSource="{Binding AtdiTasks,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" 
                                      SelectionMode="Extended" HorizontalAlignment="Stretch" 
                                      Focusable="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                                      Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" 
                                      Grid.Row="1">
                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Focusable" Value="false"/>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#FF007ACC" CornerRadius="2" BorderThickness="1" Margin="0,0,0,4" HorizontalAlignment="Stretch">
                                                <Grid HorizontalAlignment="Stretch">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <DockPanel>
                                                        <TextBlock VerticalAlignment="Center" Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="70">
                                                        <Run Text="№"/>
                                                        <Run Text="{Binding Path=task_id, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </TextBlock>

                                                        <Button Click="ATDI_TaskState_Click" Tag="{Binding task_id}" ToolTip="Состояние плана" HorizontalAlignment="Left" Grid.Column="1" Margin="5,0,0,0" Height="23" Grid.Row="1" Width="Auto">
                                                            <Button.Template>
                                                                <ControlTemplate TargetType="{x:Type Button}">
                                                                    <Grid x:Name="grid" UseLayoutRounding="True">
                                                                        <Border x:Name="border" Background="Transparent" BorderBrush="Transparent" BorderThickness="1" CornerRadius="0" UseLayoutRounding="True">
                                                                            <ContentPresenter ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="Center" UseLayoutRounding="True" VerticalAlignment="Center" />
                                                                        </Border>
                                                                    </Grid>
                                                                    <ControlTemplate.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background" TargetName="border">
                                                                                <Setter.Value>
                                                                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                                                                        <GradientStop Color="#7FA0A0A0" Offset="1"/>
                                                                                        <GradientStop Color="#7FC7C7C7"/>
                                                                                    </LinearGradientBrush>
                                                                                </Setter.Value>
                                                                            </Setter>
                                                                        </Trigger>
                                                                        <Trigger Property="IsPressed" Value="True">
                                                                            <Setter Property="Background" TargetName="border">
                                                                                <Setter.Value>
                                                                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                                                                        <GradientStop Color="#FFA0A0A0" Offset="1"/>
                                                                                        <GradientStop Color="#FFC7C7C7"/>
                                                                                    </LinearGradientBrush>
                                                                                </Setter.Value>
                                                                            </Setter>
                                                                        </Trigger>
                                                                        <Trigger Property="IsEnabled" Value="False">
                                                                            <Setter Property="Opacity" TargetName="grid" Value="0.25"/>
                                                                        </Trigger>
                                                                    </ControlTemplate.Triggers>
                                                                </ControlTemplate>
                                                            </Button.Template>
                                                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Center" Height="23" Padding="5,0" Width="90" Panel.ZIndex="1" TextAlignment="Center" Grid.Column="1">
                                                                <TextBlock.Resources>
                                                                    <Style TargetType="{x:Type TextBlock}" >
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding Path=task_state}" Value="0">
                                                                                <Setter Property="Background" Value="#7FFFFF00"/>
                                                                                <Setter Property="Text" Value="{DynamicResource DBPanel_TaskState_Waiting}"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Path=task_state}" Value="1">
                                                                                <Setter Property="Background" Value="#7FFF0000"/>
                                                                                <Setter Property="Text" Value="{DynamicResource DBPanel_TaskState_Disabled}"/>
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding Path=task_state}" Value="2">
                                                                                <Setter Property="Background" Value="#7F08B400"/>
                                                                                <Setter Property="Text" Value="{DynamicResource DBPanel_TaskState_Enabled}"/>
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </TextBlock.Resources>
                                                            </TextBlock>

                                                        </Button>

                                                        <Button Click="ATDI_SendResult_Click" Tag="{Binding}" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" HorizontalAlignment="Left" Width="27" Margin="4,0,0,0" Height="27" Grid.Column="1">
                                                            <Path Data="{StaticResource ArrowUp_inv_PathData}" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center" Fill="#FF787878" Height="19"/>
                                                        </Button>

                                                        <TextBlock Margin="4,0,0,0" VerticalAlignment="Center" Height="23" Width="130" HorizontalAlignment="Left">
                                                            <Run Text="{DynamicResource DBPanel_StationCount}"/>
                                                            <Run Text="{Binding Path=task_station_count, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </TextBlock>
                                                        <TextBlock  VerticalAlignment="Center" Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="40"/>

                                                        <Path Data="{DynamicResource ArrowRLeftStop_PathData}" Stretch="Uniform" Width="14" Height="14" Stroke="{DynamicResource Brush_Foreground_Normal}"/>
                                                        <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="100">
                                                            <!--<Run Text="{DynamicResource Start}"/>-->
                                                            <Run Text="{Binding Path=time_start, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}"/>
                                                        </TextBlock>

                                                        <Path Data="{DynamicResource ArrowRightStop_PathData}" Stretch="Uniform" Width="14" Height="14" Stroke="{DynamicResource Brush_Foreground_Normal}"/>
                                                        <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="100">
                                                            <!--<Run Text="{DynamicResource Stop}"/>-->
                                                            <Run Text="{Binding Path=time_stop, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}"/>
                                                        </TextBlock>

                                                        <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="210">
                                                            <Run Text="{DynamicResource Update}"/>
                                                            <Run Text="{Binding Path=time_save, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                        </TextBlock>


                                                        <Button Click="DataInfoMenu_Click" ContextMenuService.IsEnabled="False"  Width="27" Margin="0,0,5,0" Height="27" Grid.Column="3" 
                                                                HorizontalAlignment="Right" DockPanel.Dock="Right" FontSize="14">
                                                            <Button.ContextMenu >
                                                                <ContextMenu Placement="Left" >
                                                                    <ContextMenu.Template>
                                                                        <ControlTemplate>
                                                                            <Grid Background="{DynamicResource Brush_Background_Dark}" MinWidth="170" >
                                                                                <Grid Margin="4">
                                                                                    <Grid.RowDefinitions>
                                                                                        <RowDefinition Height="21"/>
                                                                                        <RowDefinition Height="21"/>
                                                                                        <RowDefinition Height="Auto"/>
                                                                                    </Grid.RowDefinitions>
                                                                                    <Button Click="ATDI_DeleteTask_Click" Tag="{Binding}" HorizontalContentAlignment="Left"
                                                                                            Style="{StaticResource InvisibleButton}" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" 
                                                                                            HorizontalAlignment="Stretch" Width="Auto" Height="Auto" DockPanel.Dock="Right" Padding="5,0">
                                                                                        <TextBlock Text="{DynamicResource DB_DeleteTask}" Padding="5,2"/>
                                                                                    </Button>
                                                                                    <Button Click="ATDI_DeleteResults_Click" Tag="{Binding}" HorizontalContentAlignment="Left"
                                                                                            Style="{StaticResource InvisibleButton}" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" 
                                                                                            HorizontalAlignment="Stretch" Width="Auto" Height="Auto" DockPanel.Dock="Right" Padding="5,0" Grid.Row="1">
                                                                                        <TextBlock Text="{DynamicResource DB_DeleteAllResult}" Padding="5,2"/>
                                                                                    </Button>
                                                                                    <GroupBox Header="Results" Grid.Row="2" >
                                                                                        <GroupBox.Resources>
                                                                                            <Style TargetType="{x:Type GroupBox}" BasedOn="{StaticResource {x:Type GroupBox}}">
                                                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding ResultsInfo.Count}" Value="0">
                                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </GroupBox.Resources>
                                                                                        <ItemsControl ItemsSource="{Binding ResultsInfo, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                                                  HorizontalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                                                                                                  Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" 
                                                                                                  MaxHeight="300" VerticalAlignment="Top">
                                                                                            <ItemsControl.ItemTemplate>
                                                                                                <DataTemplate>
                                                                                                    <TextBlock  Padding="5,2">
                                                                                                        <TextBlock.Resources>
                                                                                                            <Style TargetType="{x:Type TextBlock}" >
                                                                                                                <Style.Triggers>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="0">
                                                                                                                        <Setter Property="Background" Value="#7FFF0000"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="1">
                                                                                                                        <Setter Property="Background" Value="#7FFFFF00"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="2">
                                                                                                                        <Setter Property="Background" Value="#7F08B400"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="5">
                                                                                                                        <Setter Property="Background" Value="#7FFF0000"/>
                                                                                                                    </DataTrigger>
                                                                                                                </Style.Triggers>
                                                                                                            </Style>
                                                                                                        </TextBlock.Resources>
                                                                                                        <TextBlock.ToolTip >
                                                                                                            <ToolTip HorizontalContentAlignment="Left" Placement="Bottom">
                                                                                                                <Grid Background="{StaticResource Brush_Background_Normal}">
                                                                                                                    <Grid Margin="4">
                                                                                                                        <Grid.RowDefinitions>
                                                                                                                            <RowDefinition Height="21"/>
                                                                                                                            <RowDefinition Height="21"/>
                                                                                                                        </Grid.RowDefinitions>
                                                                                                                        <TextBlock Background="{StaticResource Brush_Background_Normal}">
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource NotSent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                            <Run Text="{Binding ResultSended,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                        </TextBlock>
                                                                                                                        <TextBlock Grid.Row="1" Background="{StaticResource Brush_Background_Normal}">
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Confirmed}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource ReceivedWithError}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{Binding ResponseReceived,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{Binding ResponseReceived,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                        </TextBlock>
                                                                                                                    </Grid>
                                                                                                                </Grid>
                                                                                                            </ToolTip>
                                                                                                        </TextBlock.ToolTip>
                                                                                                        <Run Text="{Binding ResultId,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run>
                                                                                                            <Run.Resources>
                                                                                                                <Style TargetType="{x:Type Run}">
                                                                                                                    <Style.Triggers>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource NotSent}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource Confirmed}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource ReceivedWithError}"/>
                                                                                                                        </DataTrigger>
                                                                                                                    </Style.Triggers>
                                                                                                                </Style>
                                                                                                            </Run.Resources>
                                                                                                        </Run>
                                                                                                    </TextBlock>                                                                                                    
                                                                                                </DataTemplate>
                                                                                            </ItemsControl.ItemTemplate>
                                                                                        </ItemsControl>
                                                                                    </GroupBox>
                                                                                </Grid>
                                                                            </Grid>
                                                                        </ControlTemplate>
                                                                    </ContextMenu.Template>
                                                                </ContextMenu>
                                                            </Button.ContextMenu>
                                                            <Grid Width="19" Height="19">
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Top" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Center" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Bottom" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                            </Grid>
                                                        </Button>
                                                        <!--<Button Click="ATDI_DeleteTask_Click" Tag="{Binding}" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" HorizontalAlignment="Right" Width="28" Margin="0,0,5,0" Height="27" Grid.Column="3" DockPanel.Dock="Right">
                                                            <Path Data="{StaticResource Delete_PathData}" Stretch="Uniform" Stroke="{DynamicResource Brush_Foreground_Normal}" VerticalAlignment="Center" HorizontalAlignment="Center" Width="11" StrokeThickness="1" Height="19"/>
                                                        </Button>-->


                                                    </DockPanel>
                                                    <ItemsControl ItemsSource="{Binding data_from_tech, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" Grid.Row="1">
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border BorderBrush="#FF787878" CornerRadius="2" BorderThickness="1" Margin="2" Grid.Row="1">
                                                                    <Border.Resources>
                                                                        <Style TargetType="{x:Type Border}">
                                                                            <Style.Triggers>                                                                        
                                                                                <MultiDataTrigger>
                                                                                    <MultiDataTrigger.Conditions>
                                                                                        <Condition Binding="{Binding tech}" Value="unknown"/>
                                                                                        <Condition Binding="{Binding ResultItems.Count, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="0"/>
                                                                                    </MultiDataTrigger.Conditions>
                                                                                    <MultiDataTrigger.Setters>
                                                                                        <Setter Property="Visibility" Value="Collapsed" />
                                                                                    </MultiDataTrigger.Setters>
                                                                                </MultiDataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </Border.Resources>
                                                                    <Expander Grid.Row="1" BorderThickness="0" >
                                                                        <Expander.Header>
                                                                            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="23" >
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="124"/>
                                                                                    <ColumnDefinition Width="160"/>
                                                                                    <ColumnDefinition Width="114"/>
                                                                                    <ColumnDefinition Width="160"/>
                                                                                    <ColumnDefinition Width="Auto"/>
                                                                                    <ColumnDefinition Width="Auto"/>
                                                                                    <ColumnDefinition Width="26*"/>
                                                                                </Grid.ColumnDefinitions>
                                                                                <TextBlock  Margin="4,0,0,0" Width="120" VerticalAlignment="Center" Height="23">
                                                                                <Run Text="Tech:"/>
                                                                                <Run Text="{Binding Path=tech, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                </TextBlock>

                                                                                <Grid Width="150" Grid.Column="1" Margin="10,0,0,0" ToolTip="Выполнено">
                                                                                    <ProgressBar Value="{Binding Path=ResultTask_WithMeasurement, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                                             Maximum="{Binding Path=TaskItems.Count, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                                             Name="StatePGB" Height="21" >
                                                                                        <ProgressBar.Resources>
                                                                                            <Style TargetType="{x:Type ProgressBar}" BasedOn="{StaticResource {x:Type ProgressBar}}">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding tech}" Value="unknown">
                                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </ProgressBar.Resources>
                                                                                    </ProgressBar>
                                                                                    <Grid ToolTip="{DynamicResource Done}" >
                                                                                        <Grid.ColumnDefinitions>
                                                                                            <ColumnDefinition Width="1*"/>
                                                                                            <ColumnDefinition Width="Auto"/>
                                                                                            <ColumnDefinition Width="1*"/>
                                                                                        </Grid.ColumnDefinitions>
                                                                                        <Grid.Resources>
                                                                                            <Style TargetType="Grid">
                                                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=ItemsState, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding tech}" Value="unknown">
                                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </Grid.Resources>
                                                                                        <TextBlock Text="{Binding ElementName=StatePGB, Path=Value, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                                                                        <TextBlock Text="{DynamicResource From}" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="1" />
                                                                                        <TextBlock Text="{Binding ElementName=StatePGB, Path=Maximum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Grid.Column="2" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="5,0,0,0" />

                                                                                        <!--<TextBlock VerticalAlignment="Center" TextAlignment="Center"  ToolTip="Выполнено" >
                                                                                        <TextBlock.Resources>
                                                                                            <Style TargetType="TextBlock">
                                                                                                <Setter Property="Visibility" Value="Visible"/>
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=ItemsState, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="0">
                                                                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </TextBlock.Resources>
                                                                                        <Run Text="{Binding ElementName=StatePGB, Path=Value, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                        <Run Text=" из "/>
                                                                                        <Run Text="{Binding ElementName=StatePGB, Path=Maximum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                    </TextBlock>-->
                                                                                    </Grid>
                                                                                </Grid>
                                                                                <TextBlock  Margin="4,0,0,0" Width="110" VerticalAlignment="Center" Height="23" Grid.Column="2">
                                                                                    <TextBlock.Resources>
                                                                                        <Style TargetType="{x:Type TextBlock}">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding tech}" Value="unknown">
                                                                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </TextBlock.Resources>
                                                                                <Run Text="{DynamicResource DBPanel_Sectors}"/>
                                                                                <Run Text="{Binding Path=SectorsCount, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                </TextBlock>


                                                                                <Border BorderBrush="#FF787878" CornerRadius="2" BorderThickness="1" Width="150" Grid.Column="3" ToolTip="Результатов отправлено" Margin="10,0,0,0" >
                                                                                    <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Stretch" TextAlignment="Center" >
                                                                                    <Path Data="M-12,0 L3,0 M7,-6 L7,6  M0,-5 L6,0 M0,5 L6,0" Stretch="Uniform" Stroke="#FF787878" VerticalAlignment="Center" HorizontalAlignment="Center" Width="17" StrokeStartLineCap="Square" StrokeEndLineCap="Square" StrokeThickness="2" />
                                                                                    <Run Text="{Binding Path=ResultTask_ToSend, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                    <Run Text="{DynamicResource From}"/>
                                                                                    <Run Text="{Binding Path=ResultItems.Count, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                    </TextBlock>
                                                                                </Border>
                                                                            </Grid>
                                                                        </Expander.Header>
                                                                        <Grid>
                                                                            <Grid.RowDefinitions>
                                                                                <RowDefinition Height="1*"/>
                                                                                <RowDefinition Height="1*"/>
                                                                            </Grid.RowDefinitions>
                                                                            <DataGrid ItemsSource="{Binding TaskItems, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" MaxHeight="300"
                                                                                  
                                                                                  IsReadOnly="True" CanUserDeleteRows="False" CanUserAddRows="False" AutoGenerateColumns="False" 
                                                                                  ColumnWidth="SizeToHeader" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" 
                                                                                  VirtualizingStackPanel.ScrollUnit="Pixel" HeadersVisibility="Column" >
                                                                                <DataGrid.Resources>
                                                                                    <Style TargetType="{x:Type DataGrid}">
                                                                                        <Style.Triggers>
                                                                                            <DataTrigger Binding="{Binding tech}" Value="unknown">
                                                                                                <Setter Property="Visibility" Value="Collapsed"/>
                                                                                            </DataTrigger>
                                                                                        </Style.Triggers>
                                                                                    </Style>
                                                                                </DataGrid.Resources>
                                                                                <DataGrid.RowDetailsTemplate>
                                                                                    <DataTemplate>
                                                                                        <Grid>
                                                                                            <Grid.RowDefinitions>
                                                                                                <RowDefinition/>
                                                                                                <RowDefinition/>
                                                                                            </Grid.RowDefinitions>
                                                                                            <!--SelectionChanged="ATDI_SpectrumResult_SelectionChanged"-->
                                                                                            <DataGrid Name="sec" ItemsSource="{Binding sectors, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" MaxHeight="300" IsReadOnly="True"
                                                                                                   AutoGenerateColumns="False"
                                                                                                  CanUserDeleteRows="False" CanUserAddRows="False" ColumnWidth="SizeToHeader"
                                                                                                  VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" VirtualizingStackPanel.ScrollUnit="Pixel"
                                                                                                  HeadersVisibility="Column">
                                                                                                <DataGrid.Columns>
                                                                                                    <DataGridTextColumn Header="{DynamicResource DB_AGL}" ToolTipService.ToolTip="{DynamicResource DB_AGL_ToolTip}" Binding="{Binding agl,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                                    <DataGridTextColumn Header="{DynamicResource Azimuth}" Binding="{Binding azimuth,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                                    <DataGridTextColumn Header="BW" Binding="{Binding bw,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource FreqConverter}}" IsReadOnly="True"/>
                                                                                                    <DataGridTextColumn Header="{DynamicResource ClassOfEmission}" Binding="{Binding class_emission,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                                    <DataGridTextColumn Header="{DynamicResource DB_EIRP[dBm]}" ToolTipService.ToolTip="{DynamicResource DB_EIRP[dBm]_ToolTip}" Binding="{Binding eirp,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}"  IsReadOnly="True"/>
                                                                                                    <DataGridTextColumn Header="{DynamicResource Frequency (MHz)}" IsReadOnly="True">
                                                                                                        <DataGridTextColumn.Binding>
                                                                                                            <MultiBinding Converter="{StaticResource ATDI_FreqsMultiConverter}">
                                                                                                                <Binding Path="frequencies" Mode="OneWay" UpdateSourceTrigger="PropertyChanged"/>
                                                                                                                <Binding Path="bw" Mode="OneWay" UpdateSourceTrigger="PropertyChanged"/>
                                                                                                            </MultiBinding>
                                                                                                        </DataGridTextColumn.Binding>
                                                                                                    </DataGridTextColumn>


                                                                                                </DataGrid.Columns>
                                                                                            </DataGrid>
                                                                                            <!--<Expander Name="res_exp" Header="Results" Grid.Row="1">
                                                                                                <DataGrid Name="res" MaxHeight="300" IsReadOnly="True" SelectionChanged="ATDI_SpectrumResult_SelectionChanged"
                                                                                                      CanUserDeleteRows="False" CanUserAddRows="False" AutoGenerateColumns="True" ColumnWidth="SizeToHeader"
                                                                                                      VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" VirtualizingStackPanel.ScrollUnit="Pixel" Grid.Row="1">
                                                                                                </DataGrid>
                                                                                            </Expander>-->
                                                                                        </Grid>
                                                                                    </DataTemplate>
                                                                                </DataGrid.RowDetailsTemplate>
                                                                                <DataGrid.Columns>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Result}" Binding="{Binding meas_data_exist,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True">
                                                                                        <DataGridTextColumn.ElementStyle>
                                                                                            <Style TargetType="{x:Type TextBlock}">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=meas_data_exist,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                                                                        <Setter Property="Background" Value="{x:Null}"/>
                                                                                                        <Setter Property="Text" Value="No"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=meas_data_exist,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                                                                        <Setter Property="Background" Value="#4C0CFF00"/>
                                                                                                        <Setter Property="Text" Value="Yes"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </DataGridTextColumn.ElementStyle>
                                                                                    </DataGridTextColumn>

                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Identified}" Binding="{Binding IsIdentified,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Standard}" Binding="{Binding standard,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Callsign_DB}" Binding="{Binding callsign_db,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="DB_S0" Binding="{Binding Callsign_db_S0,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="DB_S1" Binding="{Binding Callsign_db_S1,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="DB_S2" Binding="{Binding Callsign_db_S2,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="DB_S3" Binding="{Binding Callsign_db_S3,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="GCID" Binding="{Binding callsign_radio,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="Radio_S0" Binding="{Binding Callsign_radio_S0,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="Radio_S1" Binding="{Binding Callsign_radio_S1,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="Radio_S2" Binding="{Binding Callsign_radio_S2,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="Radio_S3" Binding="{Binding Callsign_radio_S3,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_StationAddress}" Binding="{Binding site.address,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_StationRegion}" Binding="{Binding site.region,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_StationLatitude}" Binding="{Binding site.location.latitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_StationLongitude}" Binding="{Binding site.location.longitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Status}" Binding="{Binding status,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Permission}" Binding="{Binding license.name,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_PermissionStart}" Binding="{Binding license.start_date,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_PermissionEnd}" Binding="{Binding license.end_date,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_PermissionClose}" IsReadOnly="True">
                                                                                        <DataGridTextColumn.ElementStyle>
                                                                                            <Style TargetType="{x:Type TextBlock}">
                                                                                                <Setter Property="Text" Value="{Binding license.close_date,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}" />
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=license.close_date}" Value="0001-01-01 00:00:00">
                                                                                                        <Setter Property="Text" Value="-"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </DataGridTextColumn.ElementStyle>
                                                                                    </DataGridTextColumn>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_Owner}" Binding="{Binding owner.name,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_OwnerCode}" Binding="{Binding owner.code,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_OwnerOKPO}" Binding="{Binding owner.okpo,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_OwnerZIP}" Binding="{Binding owner.zip,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                    <DataGridTextColumn Header="{DynamicResource DB_OwnerAddress}" Binding="{Binding owner.address,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                </DataGrid.Columns>
                                                                            </DataGrid>
                                                                            <Expander Header="Results" Grid.Row="1">
                                                                                <DataGrid ItemsSource="{Binding ResultItems, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" MaxHeight="300" IsReadOnly="True"
                                                                                          SelectionChanged="ATDI_SpectrumResult_SelectionChanged" 
                                                                                          CanUserDeleteRows="False" CanUserAddRows="False" AutoGenerateColumns="False" ColumnWidth="SizeToHeader"
                                                                                          VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" VirtualizingStackPanel.ScrollUnit="Pixel" 
                                                                                          HeadersVisibility="Column">                                                                                   
                                                                                    <DataGrid.Columns>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_CenterFrequency}" Binding="{Binding spec_data.FreqCentr,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource FreqConverter}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_CenterFrequencyPermission}" Binding="{Binding freq_centr_perm,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource FreqConverter}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_IdentifierFromRadio}" Binding="{Binding station_identifier_from_radio,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <!--<DataGridTextColumn Header="Доп идент." >
                                                                                        <DataGridTextColumn.ElementStyle>
                                                                                            <Style TargetType="{x:Type TextBlock}">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="GSM">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}BSIC: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="UMTS">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}SC: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="CDMA">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}PN: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="LTE">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}PCI: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </DataGridTextColumn.ElementStyle>
                                                                                    </DataGridTextColumn>-->
                                                                                        <DataGridTextColumn Header="{DynamicResource MeasMonData_AdditionalIdentifier}" ToolTipService.ToolTip="{DynamicResource MeasMonData_AdditionalIdentifier_ToolTip}" Binding="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_IdentifierFromPermission}" Binding="{Binding station_identifier_atdi,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>

                                                                                        <DataGridTextColumn Header="{DynamicResource Latitude}" Binding="{Binding station_sys_info.location.latitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource Longitude}" Binding="{Binding station_sys_info.location.longitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource Altitude[m]}" Binding="{Binding station_sys_info.location.asl,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_Strength}" Binding="{Binding meas_strength,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DBPanel_Duration[s]}" Binding="{Binding spec_data.MeasDuration,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource Start}" Binding="{Binding spec_data.MeasStart,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource Stop}" Binding="{Binding spec_data.MeasStop,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource DB_Status}" Binding="{Binding status,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTextColumn Header="{DynamicResource Operator}" Binding="{Binding user_name,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                        <DataGridTemplateColumn Header="Instr ident" IsReadOnly="True">
                                                                                            <DataGridTemplateColumn.CellTemplate>
                                                                                                <DataTemplate>
                                                                                                    <TextBlock>
                                                                                                        <Run Text="{Binding device_ident.manufacture, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run Text="{Binding device_ident.model, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run Text="{Binding device_ident.sn, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                    </TextBlock>
                                                                                                </DataTemplate>
                                                                                            </DataGridTemplateColumn.CellTemplate>
                                                                                        </DataGridTemplateColumn>
                                                                                        <DataGridTemplateColumn Header="Instr meas" IsReadOnly="True">
                                                                                            <DataGridTemplateColumn.CellTemplate>
                                                                                                <DataTemplate>
                                                                                                    <TextBlock>
                                                                                                        <Run Text="{Binding device_meas.manufacture, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run Text="{Binding device_meas.model, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run Text="{Binding device_meas.sn, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                    </TextBlock>
                                                                                                </DataTemplate>
                                                                                            </DataGridTemplateColumn.CellTemplate>
                                                                                        </DataGridTemplateColumn>
                                                                                    </DataGrid.Columns>
                                                                                    <DataGrid.RowStyle>
                                                                                        <Style TargetType="{x:Type DataGridRow}">
                                                                                            <Style.Triggers>
                                                                                                <DataTrigger Binding="{Binding station_identifier_from_radio}" Value="">
                                                                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                                                                </DataTrigger>
                                                                                            </Style.Triggers>
                                                                                        </Style>
                                                                                    </DataGrid.RowStyle>
                                                                                </DataGrid>
                                                                            </Expander>
                                                                        </Grid>
                                                                    </Expander>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Expander>
                            <Expander Header="Results without task">
                                <ListView ItemsSource="{Binding AtdiUnknownResults,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" 
                                      SelectionMode="Extended" HorizontalAlignment="Stretch" 
                                      Focusable="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                                      Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" 
                                      Grid.Row="1">
                                    <ListView.ItemContainerStyle>
                                        <Style TargetType="ListViewItem">
                                            <Setter Property="Focusable" Value="false"/>
                                        </Style>
                                    </ListView.ItemContainerStyle>
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#FF007ACC" CornerRadius="2" BorderThickness="1" Margin="0,0,0,4" HorizontalAlignment="Stretch">
                                                <Grid HorizontalAlignment="Stretch">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <DockPanel>
                                                        <TextBlock VerticalAlignment="Center" Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="140">
                                                            <Run Text="{Binding Path=time_start.Year, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                            <Run Text="{Binding Path=time_start.Month, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource MonthToString}}"/>
                                                        </TextBlock>

                                                        <Button Click="ATDI_SendResult_Click" Tag="{Binding}" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" HorizontalAlignment="Left" Width="27" Margin="10,0,0,0" Height="27" Grid.Column="1">
                                                            <Path Data="{StaticResource ArrowUp_inv_PathData}" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center" Fill="#FF787878" Height="19"/>
                                                        </Button>

                                                        <TextBlock Margin="4,0,0,0" VerticalAlignment="Center" Height="23" Width="130">
                                                            <Run Text="Results:"/>
                                                            <Run Text="{Binding Path=ResultsCount, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                        </TextBlock>

                                                        <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="140" Grid.Column="4" >
                                                            <Run Text="{DynamicResource Start}"/>
                                                            <Run Text="{Binding Path=time_start, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}"/>
                                                        </TextBlock>

                                                        <TextBlock  Height="23" Margin="4,0,0,0" HorizontalAlignment="Left" Width="140" Grid.Column="4" >
                                                            <Run Text="{DynamicResource Stop}"/>
                                                            <Run Text="{Binding Path=time_stop, Mode=OneWay, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd}}"/>
                                                        </TextBlock>

                                                        <Button Click="DataInfoMenu_Click" ContextMenuService.IsEnabled="False"  Width="27" Margin="0,0,5,0" Height="27" Grid.Column="3" 
                                                                HorizontalAlignment="Right" DockPanel.Dock="Right" FontSize="14">
                                                            <Button.ContextMenu >
                                                                <ContextMenu Placement="Left" >
                                                                    <ContextMenu.Template>
                                                                        <ControlTemplate>
                                                                            <Grid Background="{DynamicResource Brush_Background_Dark}" MinWidth="170" >
                                                                                <Grid Margin="4">
                                                                                    <Grid.RowDefinitions>
                                                                                        <RowDefinition Height="21"/>
                                                                                        <RowDefinition Height="21"/>
                                                                                        <RowDefinition Height="Auto"/>
                                                                                    </Grid.RowDefinitions>
                                                                                    <Button Click="ATDI_DeleteTask_Click" Tag="{Binding}" HorizontalContentAlignment="Left"
                                                                                            Style="{StaticResource InvisibleButton}" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" 
                                                                                            HorizontalAlignment="Stretch" Width="Auto" Height="Auto" DockPanel.Dock="Right" Padding="5,0">
                                                                                        <TextBlock Text="{DynamicResource DB_Delete}" Padding="5,2"/>
                                                                                    </Button>
                                                                                    <Button Click="ATDI_DeleteResults_Click" Tag="{Binding}" HorizontalContentAlignment="Left"
                                                                                            Style="{StaticResource InvisibleButton}" ClickMode="Press" ToolTip="{DynamicResource DBPanel_UploadTasksResults}" 
                                                                                            HorizontalAlignment="Stretch" Width="Auto" Height="Auto" DockPanel.Dock="Right" Padding="5,0" Grid.Row="1">
                                                                                        <TextBlock Text="{DynamicResource DB_DeleteAllResult}" Padding="5,2"/>
                                                                                    </Button>
                                                                                    <GroupBox Header="{DynamicResource Results}" Grid.Row="2" >
                                                                                        <ItemsControl ItemsSource="{Binding ResultsInfo, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" 
                                                                                                  HorizontalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                                                                                                  Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" 
                                                                                                  MaxHeight="300" VerticalAlignment="Top">
                                                                                            <ItemsControl.ItemTemplate>
                                                                                                <DataTemplate>
                                                                                                    <TextBlock  Padding="5,2">
                                                                                                        <TextBlock.Resources>
                                                                                                            <Style TargetType="{x:Type TextBlock}" >
                                                                                                                <Style.Triggers>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="0">
                                                                                                                        <Setter Property="Background" Value="#7FFF0000"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="1">
                                                                                                                        <Setter Property="Background" Value="#7FFFFF00"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="2">
                                                                                                                        <Setter Property="Background" Value="#7F08B400"/>
                                                                                                                    </DataTrigger>
                                                                                                                    <DataTrigger Binding="{Binding Path=DeliveryConfirmation}" Value="5">
                                                                                                                        <Setter Property="Background" Value="#7FFF0000"/>
                                                                                                                    </DataTrigger>
                                                                                                                </Style.Triggers>
                                                                                                            </Style>
                                                                                                        </TextBlock.Resources>
                                                                                                        <TextBlock.ToolTip >
                                                                                                            <ToolTip HorizontalContentAlignment="Left" Placement="Bottom">
                                                                                                                <Grid Background="{StaticResource Brush_Background_Normal}">
                                                                                                                    <Grid Margin="4">
                                                                                                                        <Grid.RowDefinitions>
                                                                                                                            <RowDefinition Height="21"/>
                                                                                                                            <RowDefinition Height="21"/>
                                                                                                                        </Grid.RowDefinitions>
                                                                                                                        <TextBlock Background="{StaticResource Brush_Background_Normal}">
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource NotSent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                            <Run Text="{Binding ResultSended,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                        </TextBlock>
                                                                                                                        <TextBlock Grid.Row="1" Background="{StaticResource Brush_Background_Normal}">
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource Confirmed}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{DynamicResource ReceivedWithError}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                            <Run>
                                                                                                                                <Run.Resources>
                                                                                                                                    <Style TargetType="{x:Type Run}">
                                                                                                                                        <Style.Triggers>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                                                <Setter Property="Text" Value=""/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                                                <Setter Property="Text" Value="{Binding ResponseReceived,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                            <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                                                <Setter Property="Text" Value="{Binding ResponseReceived,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                                                                                                                            </DataTrigger>
                                                                                                                                        </Style.Triggers>
                                                                                                                                    </Style>
                                                                                                                                </Run.Resources>
                                                                                                                            </Run>
                                                                                                                        </TextBlock>
                                                                                                                    </Grid>
                                                                                                                </Grid>
                                                                                                            </ToolTip>
                                                                                                        </TextBlock.ToolTip>
                                                                                                        <Run Text="{Binding ResultId,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                        <Run>
                                                                                                            <Run.Resources>
                                                                                                                <Style TargetType="{x:Type Run}">
                                                                                                                    <Style.Triggers>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="0">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource NotSent}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="1">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource Sent}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="2">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource Confirmed}"/>
                                                                                                                        </DataTrigger>
                                                                                                                        <DataTrigger Binding="{Binding DeliveryConfirmation}" Value="5">
                                                                                                                            <Setter Property="Text" Value="{DynamicResource ReceivedWithError}"/>
                                                                                                                        </DataTrigger>
                                                                                                                    </Style.Triggers>
                                                                                                                </Style>
                                                                                                            </Run.Resources>
                                                                                                        </Run>
                                                                                                    </TextBlock>                                                                                                    
                                                                                                </DataTemplate>
                                                                                            </ItemsControl.ItemTemplate>
                                                                                        </ItemsControl>
                                                                                    </GroupBox>
                                                                                </Grid>
                                                                            </Grid>
                                                                        </ControlTemplate>
                                                                    </ContextMenu.Template>
                                                                </ContextMenu>
                                                            </Button.ContextMenu>
                                                            <Grid Width="19" Height="19">
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Top" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Center" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                                <Rectangle Width="19" Height="5" Stroke="{DynamicResource Brush_Foreground_Normal}" Fill="{DynamicResource Brush_Background_Dark}" VerticalAlignment="Bottom" HorizontalAlignment="Center" StrokeThickness="0.6" />
                                                            </Grid>
                                                        </Button>
                                                    </DockPanel>

                                                    <ItemsControl ItemsSource="{Binding data_from_tech, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="{x:Null}" BorderBrush="{x:Null}" HorizontalContentAlignment="Stretch" Grid.Row="1">
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <Border BorderBrush="#FF787878" CornerRadius="2" BorderThickness="1" Margin="2" Grid.Row="1">
                                                                    <Expander Grid.Row="1" BorderThickness="0" >
                                                                        <Expander.Header>
                                                                            <DockPanel HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="23" >
                                                                                <TextBlock  Margin="4,0,0,0" Width="120" VerticalAlignment="Center" Height="23">
                                                                                    <Run Text="Tech:"/>
                                                                                    <Run Text="{Binding Path=tech, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                </TextBlock>
                                                                                <TextBlock  Margin="4,0,0,0" Width="120" VerticalAlignment="Center" Height="23" Grid.Column="1">
                                                                                    <Run Text="Count:"/>
                                                                                    <Run Text="{Binding Path=ResultItems.Count, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                </TextBlock>
                                                                            </DockPanel>
                                                                        </Expander.Header>
                                                                        <DataGrid ItemsSource="{Binding ResultItems, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" MaxHeight="300" IsReadOnly="True"
                                                                                  SelectionChanged="ATDI_SpectrumResult_SelectionChanged" 
                                                                                  CanUserDeleteRows="False" CanUserAddRows="False" AutoGenerateColumns="False" ColumnWidth="SizeToHeader"
                                                                                  VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" VirtualizingStackPanel.ScrollUnit="Pixel" 
                                                                                       HeadersVisibility="Column">                                                                            
                                                                            <DataGrid.Columns>
                                                                                <DataGridTextColumn Header="{DynamicResource DBPanel_CenterFrequency}" 
                                                                                                    Binding="{Binding spec_data.FreqCentr,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource FreqConverter}}" IsReadOnly="True"/>
                                                                                <!--<DataGridTextColumn Header="{DynamicResource DBPanel_CenterFrequencyPermission}" Binding="{Binding freq_centr_perm,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource FreqConverter}}" IsReadOnly="True"/>-->
                                                                                <DataGridTextColumn Header="{DynamicResource DBPanel_IdentifierFromRadio}" 
                                                                                                    Binding="{Binding station_identifier_from_radio,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <!--<DataGridTextColumn Header="Доп идент." >
                                                                                        <DataGridTextColumn.ElementStyle>
                                                                                            <Style TargetType="{x:Type TextBlock}">
                                                                                                <Style.Triggers>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="GSM">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}BSIC: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="UMTS">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}SC: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="CDMA">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}PN: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                    <DataTrigger Binding="{Binding Path=Techonology}" Value="LTE">
                                                                                                        <Setter Property="Text" Value="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}PCI: {0}}"/>
                                                                                                    </DataTrigger>
                                                                                                </Style.Triggers>
                                                                                            </Style>
                                                                                        </DataGridTextColumn.ElementStyle>
                                                                                    </DataGridTextColumn>-->
                                                                                <DataGridTextColumn Header="{DynamicResource MeasMonData_AdditionalIdentifier}" 
                                                                                                    ToolTipService.ToolTip="{DynamicResource MeasMonData_AdditionalIdentifier_ToolTip}" 
                                                                                                    Binding="{Binding station_identifier_from_radio_tech_sub_ind,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <!--<DataGridTextColumn Header="{DynamicResource DBPanel_IdentifierFromPermission}" Binding="{Binding station_identifier_atdi,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>-->

                                                                                <DataGridTextColumn Header="{DynamicResource Latitude}" Binding="{Binding station_sys_info.location.latitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource Longitude}" Binding="{Binding station_sys_info.location.longitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource Altitude[m]}" Binding="{Binding station_sys_info.location.asl,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource DBPanel_Strength}" Binding="{Binding meas_strength,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource DBPanel_Duration[s]}" Binding="{Binding spec_data.MeasDuration,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource Start}" Binding="{Binding spec_data.MeasStart,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource Stop}" Binding="{Binding spec_data.MeasStop,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource DB_Status}" Binding="{Binding status,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <DataGridTextColumn Header="{DynamicResource Operator}" Binding="{Binding user_name,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                                                <DataGridTemplateColumn Header="Instr ident" IsReadOnly="True">
                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock>
                                                                                                <Run Text="{Binding device_ident.manufacture, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                <Run Text="{Binding device_ident.model, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                <Run Text="{Binding device_ident.sn, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                            </TextBlock>
                                                                                        </DataTemplate>
                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                </DataGridTemplateColumn>
                                                                                <DataGridTemplateColumn Header="Instr meas" IsReadOnly="True">
                                                                                    <DataGridTemplateColumn.CellTemplate>
                                                                                        <DataTemplate>
                                                                                            <TextBlock>
                                                                                                <Run Text="{Binding device_meas.manufacture, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                <Run Text="{Binding device_meas.model, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                                <Run Text="{Binding device_meas.sn, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                                                            </TextBlock>
                                                                                        </DataTemplate>
                                                                                    </DataGridTemplateColumn.CellTemplate>
                                                                                </DataGridTemplateColumn>
                                                                            </DataGrid.Columns>
                                                                            <DataGrid.RowStyle>
                                                                                <Style TargetType="{x:Type DataGridRow}">
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding station_identifier_from_radio}" Value="">
                                                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </DataGrid.RowStyle>
                                                                        </DataGrid>
                                                                    </Expander>
                                                                </Border>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>

                                </ListView>
                            </Expander>
                        </StackPanel>
                    </ScrollViewer>
                    <Border Grid.Column="2" x:Name="ATDI_imageWrapPanel" Grid.Row="1">
                        <Border.Resources>
                            <Style TargetType="Border">
                                <Setter Property="Visibility" Value="Visible"></Setter>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Path=ATDI_ShowSpectrum, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                        <Setter Property="Visibility" Value="Collapsed"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Resources>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" MinHeight="50"/>
                                <RowDefinition Height="5"/>
                                <RowDefinition Height="292" MinHeight="294"/>
                            </Grid.RowDefinitions>
                            <GridSplitter Margin="1,0" HorizontalAlignment="Stretch" Grid.Column="1" Panel.ZIndex="1" Grid.Row="1" Height="3">
                                <GridSplitter.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <LinearGradientBrush.RelativeTransform>
                                            <TransformGroup>
                                                <ScaleTransform CenterY="0.5" CenterX="0.5"/>
                                                <SkewTransform CenterY="0.5" CenterX="0.5"/>
                                                <RotateTransform Angle="0" CenterY="0.5" CenterX="0.5"/>
                                                <TranslateTransform/>
                                            </TransformGroup>
                                        </LinearGradientBrush.RelativeTransform>
                                        <GradientStop Color="LightGray" Offset="0.5"/>
                                        <GradientStop Color="Gainsboro" Offset="1"/>
                                        <GradientStop Color="#FFAFAFAF"/>
                                    </LinearGradientBrush>
                                </GridSplitter.Background>
                            </GridSplitter>

                            <Grid x:Name="ATDI_SpectrResultGrid" SizeChanged="ATDI_SpectrImage_SizeChanged" >
                                <Image  Source="{Binding ATDI_SpectrImg,UpdateSourceTrigger=PropertyChanged,Mode=OneWay}"
                                    HorizontalAlignment="Center" VerticalAlignment="Center" SnapsToDevicePixels="True"/>
                            </Grid>
                            <Grid Grid.Row="2" Name="spec_info" Margin="0,4" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TabControl>
                                    <TabItem Header="Meas Result">
                                        <StackPanel VerticalAlignment="Top" >
                                            <GroupBox Header="{DynamicResource Marker_Markers}" VerticalAlignment="Top" Margin="4,0">
                                                <Grid VerticalAlignment="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="1*"/>
                                                        <ColumnDefinition Width="2*"/>
                                                        <ColumnDefinition Width="2*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <TextBlock Text="{DynamicResource Marker_Type}" VerticalAlignment="Center" Height="23" TextAlignment="Center"/>
                                                    <TextBlock Text="{DynamicResource Marker_Frequency}" VerticalAlignment="Center" Height="23" TextAlignment="Center" Grid.Column="1"/>
                                                    <TextBlock Text="{DynamicResource Marker_Level}" VerticalAlignment="Center" Height="23" TextAlignment="Center" Grid.Column="2"/>

                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="1"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="1"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="1"/>

                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="2"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="2"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="2"/>

                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="3"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="3"/>
                                                    <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="3"/>
                                                </Grid>
                                            </GroupBox>
                                            <GroupBox Header="Напряженность поля" Visibility="Collapsed" Margin="4,0" VerticalAlignment="Top" Grid.Row="1">
                                                <Grid VerticalAlignment="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <TextBlock VerticalAlignment="Center" Height="23">
                                        <Run Text="Измеренная:"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.STRENGTH, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </GroupBox>
                                            <GroupBox Header="{DynamicResource DBPanel_CenterFrequency}" Margin="4,0" VerticalAlignment="Top" Grid.Row="2">
                                                <Grid VerticalAlignment="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                    </Grid.RowDefinitions>
                                                    <TextBlock VerticalAlignment="Center" Height="23">
                                        <Run Text="{DynamicResource DBPanel_Permission}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.FreqPermision, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                                    </TextBlock>
                                                    <TextBlock VerticalAlignment="Center" Height="23" Grid.Column="1">
                                        <Run Text="{DynamicResource DBPanel_Measured}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.FreqMeasured, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                                    </TextBlock>
                                                    <TextBlock VerticalAlignment="Center" Height="23" Grid.ColumnSpan="2" Grid.Row="1">
                                        <Run Text="{DynamicResource RelativeFrequencyDeviation}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.RelativeDeviation, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        <Run Text="x10e-6"/>
                                                    </TextBlock>
                                                </Grid>
                                            </GroupBox>
                                            <GroupBox Header="{DynamicResource SignalBandwidth}" VerticalAlignment="Top" Grid.Row="3" Margin="4,0">
                                                <Grid VerticalAlignment="Top">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <!--<TextBlock VerticalAlignment="Center" Height="23">
                                            <Run Text="{DynamicResource DBPanel_Permission}"/>
                                            <Run Text="5 MHz"/>
                                                    </TextBlock>-->
                                                    <TextBlock VerticalAlignment="Center" Height="23" Grid.Column="1">
                                            <Run Text="{DynamicResource DBPanel_Measured}"/>
                                            <Run Text="{Binding Path=ATDI_SpectrData.BWMeasured, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </GroupBox>
                                        </StackPanel>
                                    </TabItem>
                                    <TabItem Header="SIBs">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <ItemsControl ItemsSource="{Binding Path=ATDI_SpectrData.InformationBlocks,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Margin="3,2" >
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Button Click="ATDI_SpectrData_InformationBlock_Select_Click" Tag="{Binding datastring,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Width="Auto" Margin="0,0,5,0">
                                                            <TextBlock Text="{Binding type,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Margin="5,0" FontSize="12" />
                                                        </Button>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Grid.Row="1" Padding="3" >
                                                <TextBlock Text="{Binding ATDI_SpectrData.SelectedInformationBlock,UpdateSourceTrigger=PropertyChanged,Mode=OneWay}"
                                                    Grid.Row="1" TextWrapping="Wrap" FontSize="12" VerticalAlignment="Stretch" Margin="2" />
                                            </ScrollViewer>
                                        </Grid>
                                    </TabItem>
                                    <TabItem Header="Meas points">
                                        <DataGrid ItemsSource="{Binding ATDI_SpectrData.level_measurements_car, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"
                                                  CanUserDeleteRows="False" CanUserAddRows="False" AutoGenerateColumns="False" ColumnWidth="SizeToHeader"
                                                  VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" VirtualizingStackPanel.ScrollUnit="Pixel" Grid.Row="1">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="saved_in_db" Binding="{Binding saved_in_db,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="saved_in_result" Binding="{Binding saved_in_result,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="{DynamicResource Latitude}" Binding="{Binding location.latitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="{DynamicResource Longitude}" Binding="{Binding location.longitude,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource CoorConverter}}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="{DynamicResource Altitude[m]}" Binding="{Binding location.asl,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="{DynamicResource Level}" Binding="{Binding level_dbm,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,Converter={StaticResource LevelConverter},ConverterParameter=dBm}" IsReadOnly="True"/>
                                                <DataGridTextColumn Header="{DynamicResource DateTime}" Binding="{Binding measurement_time,Mode=OneWay,UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" IsReadOnly="True"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </TabItem>
                                </TabControl>
                                <!--<StackPanel Margin="0,0,30,0" VerticalAlignment="Top" >
                                    <GroupBox Header="{DynamicResource Marker_Markers}" VerticalAlignment="Top" Margin="4,0">
                                        <Grid VerticalAlignment="Top">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="1*"/>
                                                <ColumnDefinition Width="2*"/>
                                                <ColumnDefinition Width="2*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="{DynamicResource Marker_Type}" VerticalAlignment="Center" Height="23" TextAlignment="Center"/>
                                            <TextBlock Text="{DynamicResource Marker_Frequency}" VerticalAlignment="Center" Height="23" TextAlignment="Center" Grid.Column="1"/>
                                            <TextBlock Text="{DynamicResource Marker_Level}" VerticalAlignment="Center" Height="23" TextAlignment="Center" Grid.Column="2"/>

                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="1"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="1"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerM1.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="1"/>

                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="2"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="2"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT1.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="2"/>

                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Type, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Row="3"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Freq, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="1" Grid.Row="3"/>
                                            <TextBlock Text="{Binding Path=ATDI_SpectrData.MarkerT2.Level, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" TextAlignment="Center" VerticalAlignment="Center" Height="23" Grid.Column="2" Grid.Row="3"/>
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox Header="Напряженность поля" Visibility="Collapsed" Margin="4,0" VerticalAlignment="Top" Grid.Row="1">
                                        <Grid VerticalAlignment="Top">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock VerticalAlignment="Center" Height="23">
                                        <Run Text="Измеренная:"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.STRENGTH, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                            </TextBlock>
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox Header="{DynamicResource DBPanel_CenterFrequency}" Margin="4,0" VerticalAlignment="Top" Grid.Row="2">
                                        <Grid VerticalAlignment="Top">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock VerticalAlignment="Center" Height="23">
                                        <Run Text="{DynamicResource DBPanel_Permission}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.FreqPermision, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                            </TextBlock>
                                            <TextBlock VerticalAlignment="Center" Height="23" Grid.Column="1">
                                        <Run Text="{DynamicResource DBPanel_Measured}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.FreqMeasured, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                            </TextBlock>
                                            <TextBlock VerticalAlignment="Center" Height="23" Grid.ColumnSpan="2" Grid.Row="1">
                                        <Run Text="{DynamicResource RelativeFrequencyDeviation}"/>
                                        <Run Text="{Binding Path=ATDI_SpectrData.RelativeDeviation, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        <Run Text="x10e-6"/>
                                            </TextBlock>
                                        </Grid>
                                    </GroupBox>
                                    <GroupBox Header="{DynamicResource SignalBandwidth}" VerticalAlignment="Top" Grid.Row="3" Margin="4,0">
                                        <Grid VerticalAlignment="Top">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            -->
                                <!--<TextBlock VerticalAlignment="Center" Height="23">
                                            <Run Text="{DynamicResource DBPanel_Permission}"/>
                                            <Run Text="5 MHz"/>
                                            </TextBlock>-->
                                <!--
                                            <TextBlock VerticalAlignment="Center" Height="23" Grid.Column="1">
                                            <Run Text="{DynamicResource DBPanel_Measured}"/>
                                            <Run Text="{Binding Path=ATDI_SpectrData.BWMeasured, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource FreqConverter}}"/>
                                            </TextBlock>
                                        </Grid>
                                    </GroupBox>
                                </StackPanel>
                                <Expander Margin="5,0" ExpandDirection="Left" Background="{DynamicResource Brush_Background_Dark}" BorderBrush="#FF99B4D1" HorizontalAlignment="Right" MaxHeight="{Binding ElementName=spec_info, Mode=OneWay,Path=ActualHeight}" Padding="0" BorderThickness="1" >
                                    <Expander.Header>
                                        <TextBlock Text="SIBs" FontSize="20" Margin="0,0,-34,0" RenderTransformOrigin="0,0" VerticalAlignment="Center" HorizontalAlignment="Center">
                                            <TextBlock.RenderTransform>
                                                <TransformGroup>
                                                    <ScaleTransform/>
                                                    <SkewTransform/>
                                                    <RotateTransform Angle="90"/>
                                                    <TranslateTransform X="16"/>
                                                </TransformGroup>
                                            </TextBlock.RenderTransform>
                                        </TextBlock>
                                    </Expander.Header>
                                    
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>
                                        <ItemsControl ItemsSource="{Binding Path=ATDI_SpectrData.InformationBlocks,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Margin="3,2" >
                                            <ItemsControl.ItemsPanel>
                                                <ItemsPanelTemplate>
                                                    <StackPanel Orientation="Horizontal"/>
                                                </ItemsPanelTemplate>
                                            </ItemsControl.ItemsPanel>
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Button Click="ATDI_SpectrData_InformationBlock_Select_Click" Tag="{Binding datastring,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Width="Auto" Margin="0,0,5,0">
                                                        <TextBlock Text="{Binding type,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Margin="5,0" FontSize="12" />
                                                    </Button>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" Grid.Row="1" Padding="3" >
                                            <TextBlock Text="{Binding ATDI_SpectrData.SelectedInformationBlock,UpdateSourceTrigger=PropertyChanged,Mode=OneWay}"
                                                    Grid.Row="1" TextWrapping="Wrap" FontSize="12" />
                                        </ScrollViewer>
                                    </Grid>


                                </Expander>-->

                            </Grid>

                        </Grid>

                    </Border>
                </Grid>

            </TabItem>


            <TabItem Header="WRLS разрешения" Visibility="Collapsed" Width="170" FontSize="16" Height="30">
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="27"/>
                        <RowDefinition Height="193*"/>
                        <RowDefinition Height="193*"/>
                    </Grid.RowDefinitions>
                    <!--<ma:MarkerStation LeftSegmentColor="DarkBlue" RightSegmentColor="Aqua" TextCentr="" Grid.Row="2" HorizontalAlignment="Center" VerticalAlignment="Center" Height="60" Width="60"/>-->
                    <!--<local:CircularProgressBar LeftMinimum="0" LeftMaximum="5" LeftValue="{Binding ElementName=sl,Path=Value}" RightMinimum="0" RightMaximum="5" RightValue="{Binding ElementName=sl,Path=Value}" Width="50" Height="50" StrokeThickness="10" Grid.Row="2"/>-->
                    <Slider Minimum="0" Maximum="5" x:Name="sl" Margin="0,0,10,0"
                Value="2" Grid.Row="2" VerticalAlignment="Bottom"/>
                    <DataGrid x:Name="WRLSMacBinding_DB" ItemsSource="{Binding WRLSMacBindings, Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" 
                          CanUserDeleteRows="False" CanUserAddRows="False" CanUserResizeColumns="False" AutoGenerateColumns="False" 
                          VerticalScrollBarVisibility="Auto" Grid.Row="1" >
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Type" Binding="{Binding MAIN_SECONDARY,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}"  IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=MAIN_SECONDARY,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Value="NON">
                                                <Setter Property="Background" Value="#7FFF0000"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=MAIN_SECONDARY,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Value="AP">
                                                <Setter Property="Background" Value="#4C0CFF00"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=MAIN_SECONDARY,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Value="STA">
                                                <Setter Property="Background" Value="#7FFFCF00"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="STN_FRQ_ID" Binding="{Binding STN_FRQ_ID}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="AP MAC" Binding="{Binding AP_MAC}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="STA MAC" Binding="{Binding STA_MAC}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="PermissionNumber" Binding="{Binding PermissionNumber}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="LATITUDE" Binding="{Binding LATITUDE}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="LONGITUDE" Binding="{Binding LONGITUDE}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Удалить привязку MAC к разрешению" Click="wrls_delete_binding">

                                </MenuItem>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>

                </Grid>
            </TabItem>

        </TabControl>
    </Grid>
</UserControl>
